# Пояснительная записка к л\р №1 "Разведка"

## Требования к инструментам для выполнения л\р:

* Для заданий, использующих командную строку - Kali linux
* Для заданий, использующих http ссылку - любой браузер в любой ОС
* Наличие интернета

## Задание 1: История DNS имён

```
http://viewdns.info/iphistory/?domain=mospolytech.ru
```

## Задание 2: Поиск сертификатов

```
https://crt.sh/?q=%25.mospolytech.ru
```

## Задание 3: Поиск информации о почтовых ящиках по заданному домену

Домен выбрать самостоятельно или использовать mospolytech.ru. Все дальнейшие примеры

будут рассматриваться с учетом именно этого домена.

```
$ theharvester -d mospolytech.ru -b all
```
Полученные результаты занести в таблицу:

Найденные IP адреса|Найденные доменные имена|Найденные почтовые ящики
-------------------|------------------------|------------------------
93.184.216.34      |    example.com         | info@example.com

Ответьте на вопросы:
* Какую информацию вы получили на выходе?
* Где можно применить эту информацию?

## Задание 4: Поиск информации о суб-доменах по заданному домену

В терминале ввести команды:

```
$ recon-ng
[recon-ng][default] > load google_site_web
recon-ng][default][google_site_web] > set source mospolytech.ru
[recon-ng][default][google_site_web] > run
```

Заполнить таблицу:

Найденные суб домены|
--------------------|
example.company.com |

Ответьте на вопросы:
* Какую информацию вы получили на выходе?
* Где можно применить эту информацию?

## Задание 5: Поиск информации у регистратора по заданному домену

В терминале ввести команды:

```bash
$ whois ptsecurity.com
```

Заполнить таблицу:


|                 |Информация о домене mospolytech.ru|Информация о домене  ptsecurity.com|
|-----------------|----------------------------------|-----------------------------------|
|Владелец         |   |   |
|Почтовые адреса  |   |   | 
|Физические адреса|   |   |
|IP адреса        |   |   |
|Телефоны         |   |   |
|ДНС сервера      |   |   |
|DNSSEC           |   |   |


## Задание 6: Поиск информации у DNS серверов по заданному домену

В терминале ввести команды:

```
$ dnsrecon -d mospolytech.ru
```

Заполнить таблицу:

|Тип записи|Доменное имя|IP адрес|
|----------|------------|--------|
|          |            |        |

Ответьте на вопросы:
* Какую еще информацию вы почерпнули из вывода команды?
* Что такое А запись?
* Что такое запись SOA?
* Что такое NS?
* Какие DNS сервера бывают? (вендор)
* С каким dns сервером взаимодействовали вы?

## Задание 7: Перебор доменов по словарю

Попробуем использовать грубый перебор по словарю, чтобы выявить домены, 
которых нет в google, и о которых нам не рассказал NS.

В терминале ввести команды:

```
# cd /usr/share/wordlists/
# git clone https://github.com/rbsec/dnscan.git
# dnsrecon -d mospolytech.ru -t brt -D /usr/share/wordlists/dnscan/subdomains-10000.txt
```

Ответьте на вопросы:
* Какие дополнительные результаты принес нам этот словарь?

Добавьте в таблицу задания №6 полученные результаты.

## Задание 8: Обратное получение dns имени из ip адреса

Кроме того можно выполнять обратное преобразование ip адресов в домены. 

Попробуйте выполнить команду со всеми найденными IP адресами из заданий 6 и 7:

```
dnsrecon -d mospolytech.ru -n 8.8.8.8 -t rvl -r x.x.x.x
```

Вместо google dns попробуйте подставить ns сервера, которые вы нашли ранее, запишите их в таблицу:

|Найденный NS сервер|IP адрес|
|-------------------|--------|
|                   |        |

Попробуйте также несколько других утилит и запишите данные в таблицу:
* dnsenum
* dnsmap

Дополнительные материалы для изучения:
* https://xakep.ru/2017/09/19/hack-contest-dns-dig

## Задание 9: Ищем информацию о серверах и сетях

```
https://www.censys.io/ipv4?q=mospolytech.ru
https://bgp.he.net/dns/mospolytech.ru
```

## Задание 10: Агрегированный поиск информации.

Введите команду:

```
# dmitry mospolytech.ru
```

Запишите полученные результаты в таблицу.

## Задание 11: Использование публичных сервисов для поиска информации и агрегирование полученных данных.

Соберите все ранее полученные данные по домену mospolytech.ru в единую таблицу. 

Посмотрите, остались ли у вас пробелы? Постарайтесь выполнить прямой и обратный поиск по IP адресам, 
доменам и субдоменам. В поиске также используйте сервисы сайта 2ip.ru:

Зайдите на сайт 2ip.ru и введите там найденные доменные имена и IP адреса. 

Вы должны получить информацию следующего характера:
* Информация об IP адресе или домене
* IP интернет ресурса
* Система управления сайтом (CMS)
* Хостинг сайта
* Информация о сайте
* Сайты на одном IP
* Все домены одного владельца
* DNS параметры домена
* Поиск доменного имени
* Определение IP адреса по Е-mail

Это задание очень трудоемкое - каждый ответ на каждый запрос из списка выше может принести вам новую информацию,
которая также должна быть проверена через список выше, что в свою очередь опять может принести информацию 
и так далее по кругу.

## Задание 12: Maltego

Ознакомьтесь с софтом Maltego, указав ему ваш исходный домен и посмотрите, сможет ли автоматика собрать информации
больше чем вы. Учтите, что в зависимости от выбранного режима могут встречаться фальшпозитивы, которые требуется
обрабатывать вручную, убеждаясь принадлежит ли данная информация искомой цели или нет.