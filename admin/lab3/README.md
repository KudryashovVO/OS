# Пояснительная записка к л\р №3
## Требования к инструментам для выполнения л\р:

* UNIX-окружение (например OC Ubuntu bionic, но можно использовать windows и mac os)
* Зарегестрированный аккаунт на github
* Установленная система контроля версий git

## Что такое git:

GIT это распределённая система управления версиями.
Система управления версиями — программное обеспечение для облегчения работы с изменяющейся информацией.
Система управления версиями позволяет хранить несколько версий одного и того же документа,
при необходимости возвращаться к более ранним версиям, определять, кто и когда сделал то или иное изменение
и многое другое.

Проект был создан Линусом Торвальдсом для управления разработкой ядра Linux,
первая версия выпущена 7 апреля 2005 года. На сегодняшний день его поддерживает Джунио Хамано.

Среди проектов, использующих Git — ядро Linux, Swift, Android, Drupal, Cairo,
GNU Core Utilities, Mesa, Wine, Chromium, Compiz Fusion, FlightGear, jQuery,
PHP, NASM, MediaWiki, DokuWiki, Qt, ряд дистрибутивов Linux.

Программа является свободной и выпущена под лицензией GNU GPL версии 2. По умолчанию используется TCP порт 9418.

Подробную документацию об СКВ GIT вы можете найти здесь: https://git-scm.com/book/ru/v2 

## Установка:
* Ubuntu/Debian: 
```
sudo apt install git
```
* В случае с Red Hat:
```
sudo yum install git-core
```
* Windows: https://git-scm.com/download/win
* Mac OS: https://git-scm.com/download/mac

## Config

Для упрощения работы с git можно вносить некоторые коррективы в работу по-умолчанию. В частности вы можете поместить
содержимое этого листинка в файл `~/.gitconfig`:

```
[user]
  name = Alexander Kondratyev
  email = info@bykvaadm.ru
[color]
  diff = auto
  status = auto
  branch = auto
  ui = true
[alias]
  st = status
  ci = commit
  co = checkout
  br = branch
  tree = log --graph --decorate --pretty=oneline --abbrev-commit
[core]
  quotepath = false
  pager = less -F -X
[url "git://git.debian.org/d-i/"]
  insteadOf = git+ssh://git.debian.org/git/d-i/
[push]
  default = simple
[pull]
  rebase = true
[gitflow "branch"]
  develop = development
```
В этом конфиге сразу задается имя пользователя и его почтовый адрес, некоторые настройки, а также псевдонимы (alias).
Псевдонимы используются для сокращения набора команд, например, вместо 
`git log --graph --decorate --pretty=oneline --abbrev-commit` можно сделать alias и вводить `git tree`.

## Правила оформления commit message
* Отделяйте заголовок от содержимого коммита пустой строкой
* Уложите заголовок в 50 символов
* Пишите заголовок с заглавной буквы
* Не ставьте точку в конце заголовка
* Используйте повелительное наклонение в заголовке
* Ограничьте длину строк в сообщении 72 символами
* В сообщении пишите что и почему сделано, а не как
* Сообщение должно быть написано на английском языке

Примеры:
```
Add condition for service clusterIP (#12159)
[stable/coredns] Fix wrong service account ref (#10230)
Update chart for new cluster-checks feature (#11241)
[stable/docker-registry] add persistence.deleteEnabled param (#10917)
Fix invalid yaml output when no extra config is specified (#11483)
[stable/eventrouter] Add new configs (#6454)
Add README.md to fluentd (#11182)   
```

В результате у вас должно получиться такое сообщение, которое понятно описывает что конкретно вы сделали. Не бойтесь
вносить несколько правок в один и тот же файл и делать похожие commit message, в последующих Л/Р мы рассмотрим
как правильно с этим бороться

Подробнее о правилах написания коммитов читайте здесь: http://frontiermag.ru/commit-message.html

## Как защитить лабораторную работу
* Вы должны написать и выгрузить на github 10 скриптов, которые решают задания suzen.
* В README.md написать свое ФИО, группу и список решенных Вами заданий.
* Предоставить ссылку на репозитерий преподавателю

## Задание:

1) Создайте аккаунт на github, а в нем создайте новый пустой репозиторий. Пустой репозиторий (bare) означает что он не
будет содержать никаких файлов в себе изначально - эту часть мы вынесем на сторону клиента и сделаем руками.

2) Сгенерируйте ключ и введите его в вашем аккаунте Github: https://github.com/settings/keys
```
ssh-keygen
```
**ssh-keygen** - authentication key generation, management and conversion.
Программа необходимая вам для создания пары приватного и публичного ключей.
В результате работы вы получите несколько файлов: файл с расширением id_rsa.pub — это ваш открытый ключ,
а id_rsa  — ваш секретный ключ. По-умолчанию файлы помещаются в домашний каталог пользователя в папку `.ssh`.
Подробнее читайте тут: https://git-scm.com/book/ru/v2/Git-на-сервере-Генерация-открытого-SSH-ключа.

**ВАЖНО:** Вам следует сохранять файлы id_rsa, id_rsa.pub т.к. вы будете их использовать для подключения к github,
поэтому чтобы каждый раз не генерировать ключи и не заливать их на github, если вы будете пользоваться git только на
виртуальных машинах, после генерирования сделайте копию ключей на основную систему.

3) Создать новый репозиторий:
```
git init
```
**git init** - команда для создания нового репозитория. Необходимо открыть терминал, зайти в корневую папку проекта
и выполнить команду git init. Эта команда создаст в текущем каталоге подкаталог с именем `.git`,
содержащий все необходимые файлы репозитория - основу git репозитория.
На этом этапе проект пока ещё не находится под версионным контролем.

4) Создайте в рабочей директории файл README.md
Этот файл будет вашей визитной карточкой в этом репозитории. Файл с таким именем и расширением обычно заполняется
в формате markdown и в случае просмотра через веб интерфейс такая разметка парсится сайтом и форматируется в удобной
читабельной форме. Форма остается не менее читабельной если ее открыть и через текстовые редакторы. Этот файл
обычно описывает суть репозитория, ключевые моменты, коментарии, описание, способы использования, запуска прогрмаммного
продукта и многое другое.

В вашем случае предлагается в этом файле написать отчет по выполненной лабораторной работе, ФИО и номер группы студента.
В качестве работы по markdown предлагается взять титульный лист из какого-либо официального отчета для вашего университета
и переделать его в формате markdown. Однако, следует учесть что markdown - не имеет столько возможностей, как редакторы
типа MS Office, поэтому титульный лист следует упростить до приемлимой формы.

Подробнее об markdown можно прочитать тут: https://guides.github.com/features/mastering-markdown/

5) Проиндексировать и добавить существующие файлы рабочей директории под версионный контроль:
К этому пункту у вас должен быть создан файл README.md и заполнены основные тезисы, например заголовок и фио студента.
```
git add .
git commit -m 'Initial commit'
```
Для того чтобы добавить файлы в под версионный контроль нужно их проиндексировать и осуществить
первую финксацию измений (git commit)

**git add** - команда для добавления содержимого рабочей директории в индекс (staging area) для последующего коммита.
По умолчанию git commit использует лишь этот индекс,
так что вы можете использовать git add для сборки слепка вашего следующего коммита.

6) Определение состояния репозитория
```
git status
```
Один их основных инструментов, используемых для определения, какие файлы в каком состоянии находятся — это команда 
`git status`. Она будет вам показывать какие файлы зафиксированы (commited), 
какие изменены (Changes not staged for commit, modified), какие проиндексированы (Changes to be committed),
а какие были только недавно созданы и git про них еще ничего не знает (Untracked files).

Просмотр истории коммитов
```
git log
```
После того, как вы создали несколько коммитов или же склонировали репозиторий с уже существующей историей коммитов, 
вероятно вам понадобится возможность посмотреть что было сделано – историю коммитов. 
Одним из основных и наиболее мощных инструментов для этого является команда `git log`.

7) Настройка строки подключения к удаленному серверу
**git remote add** - команда для создания новой строки подключения к серверу. Состоит из названия соединения и
 адреса сервера. Один репозиторий может содержать несколько таких строчек в рамках одного проекта, так что вы можете
 выгружать один и тот же проект сразу на несколько серверов. Строку подключения вы можете получить в вашем проекте на
 github нажав на кнопку `clone or download` и выбрав ssh форму.
 
 Обычно по-умолчанию в качестве имени подключения используют слово origin.
```
git remote add origin git@github.com:bykvaadm/OS.git # Подставьте сюда свою строку подключения
```
Когда вы хотите поделиться своими наработками, вам необходимо отправить (push) их в главный репозиторий.
Команда для этого действия простая: `git push`. В полной форме она выглядит следующим образом, вам необходимо указать
еще и имя подключения, а также имя отправляемой ветки:
```
git push -u origin master
```
Для того чтобы подключение и имя ветки подставлялось автоматически можно использовать команду:
```
git push --set-upstream origin master
```

К этому моменту в вашем проекте существует как минимум 1 файл и как минимум один коммит, который выгружен (push) на github.

8) В дальнейших заданиях вам предлагается проимитировать небольшую разработку и начать развивать свой репозиторий.

Выберите задание из Л/Р №1 - escape.myctf.ru и напишите (где это возможно) bash или sh скрипт, а если невозможно -
просто набор команд для автоматизированного получения флага. В идеале флаг должен быть получен в своей конечной форме, так
чтобы после выполнения ваших команд была выведена строка: `Flag is: XXXXXXXXX`. Если это невозможно сделать из-за
ограничений уровня, флаг должен быть виден в пределах одного экана.

Пример скриптов для нескольких уровней:
* ```
  #!/bin/bash 
  cat flag
  ```
* ```
  #!/bin/bash 
  cat flag | grep FLAG
  ```
* ```
  #!/bin/bash 
  tail -f diary | grep FLAG
  ```

9) После того как вы закончите разработку вашего скрипта (например level23.sh) посмотрите состояние репозитория git:
```
git st
```
Опишите что вы увидели

10) Проидексируйте ваш добавленный файл 
```
git add level23.sh
```
11) Выполните фиксацию проекта
```
git commit -m 'Add level 23 solving script'
```
12) Выполните выгрузку коммитов на сервер:
```
git push
```
13) Повторите пункты 8-12 десять раз. В результате у вас должно получиться не менее 11 файлов в проекте и не менее 11 коммитов.

## Краткий пример данной работы:

```
 mkdir suzen
 cd suzen
 git init 
 git add .
 git commit -m 'initial project'
 touch script.sh
 echo '#!/bin/bash' >> script.sh
 echo 'ls -l' >> script.sh
 echo 'cat flag' >> script.sh
 sudo chmod +x script.sh
 git add script.sh
 git commit -m 'add script'
 git remote add origin git@github.com:bykvaadm/OS.git
 git push -u origin master
```


